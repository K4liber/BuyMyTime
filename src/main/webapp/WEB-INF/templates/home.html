<!DOCTYPE html>
<html
	xmlns="http//www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="UTF-8">
<title>Home Page</title>
</head>
<body>
	<sec:authorize access="hasRole('ROLE_USER')" var="isUser"></sec:authorize>
	<span id="userNick" th:text="${username}" style="display:none;">username</span>
	<header id="header" class="alt" th:include="header :: headerMenu"></header>
	<script>
		getHome();
	</script>
	<div id="loginDialog" title="Sign in" style="display:none;">
	  <form name='f' method="POST" th:action="@{/login}">
		<table>
			<tr>
				<td>
					<label>Username</label>:
					<input type="text" name="username" /><br/>
				</td>
			</tr>
			<tr>
				<td>
					<label>Password</label>:
					<input type="password" name='password'/><br/>
				</td>
			</tr>
			<tr>
				<td><input type="submit" name='submit' value="Login" class="ui-button ui-widget ui-corner-all"/></td>
			</tr>
		</table>
	  </form>
	  Do not sign up yet?
	  <button id="registerButton" class="ui-button ui-widget ui-corner-all" th:href="@{/register}">Register</button>
    </div>
    <div id="registerDialog" title="Sign up" style="display:none;">
    <form method="POST" th:action="@{/register}" enctype="multipart/form-data" th:object="${user}">
		<table>
			<tr>
				<td>
					<label>Nick</label>:
					<input type="text" th:field="*{username}" /><br/>
				</td>
				<td th:if="${#fields.hasErrors('username')}" th:errors="*{username}">Username Error</td>
			</tr>
			<tr>
				<td>
					<label>Password</label>:
					<input type="password" th:field="*{password}" /><br/>
				</td>
				<td th:if="${#fields.hasErrors('password')}" th:errors="*{password}">Password Error</td>
			</tr>
			<tr>
				<td>
					<label>Confirm Password</label>:
					<input type="password" th:field="*{confirmPassword}" /><br/>
				</td>
				<td th:if="${#fields.hasErrors('confirmPassword')}" th:errors="*{confirmPassword}">Confirm Password Error</td>
			</tr>
			<tr>
				<td>
					<label>E-mail</label>:
					<input type="text" th:field="*{email}" /><br/>
				</td>
				<td th:if="${#fields.hasErrors('email')}" th:errors="*{email}">E-mail Error</td>
			</tr>
			<tr>
				<td><input type="submit" value="Register" /></td>
			</tr>
		</table>
	</form>
	</div>
	<div class="tilesContainer" id="container">
		<div sec:authorize="!hasAuthority('ROLE_USER')">
			<button id="homeButton" class="ui-button ui-widget ui-corner-all" onClick="getHome()">Home</button>
			<button id="aboutButton" class="ui-button ui-widget ui-corner-all" onclick="getAbout()">About</button>
			<button id="loginButton" class="ui-button ui-widget ui-corner-all" onClick="getLogin()">Sign in</button>
		</div>
		<div id="menu" sec:authorize="hasAuthority('ROLE_USER')">
			<button id="homeButton" class="ui-button ui-widget ui-corner-all" onClick="getHome()">Home</button>
			<button id="cardsButton" class="ui-button ui-widget ui-corner-all" onClick="getContacts()">Contacts</button>
			<button id="profileButton" class="ui-button ui-widget ui-corner-all" onClick="getProfile()">Profile</button>
			<button id="cardsButton" class="ui-button ui-widget ui-corner-all" onClick="getCards()">Cards</button>
			<button id="logoutButton" class="ui-button ui-widget ui-corner-all" onClick="getLogout()">Logout</button>
		</div>
		<div class="contents" id="contents"></div>
		<div class="chatContents" id="chatContents" style="display:none;"></div>
		<div id="dialog" style="display:none;"></div>
	</div>
</body>
</html>